{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nexport let perPage = 15;\n\nexport const fetchFotosByQuery = async (searchQuery, page) => {\n  const response = await axios.get(`${BASE_URL}`, {\n    params: {\n      key: '43952062-1ac9439355a7535a7f5f048fb',\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: perPage,\n    },\n  });\n  return response.data;\n  // .then(response => response.data)\n  // .catch(error => console.log(error));\n};\n\n// export const addMorePhotos = async (searchQuery, page) => {\n//   try {\n//     const photosData = await fetchFotosByQuery(searchQuery, page);\n//     galleryEl.insertAdjacentHTML(\n//       'beforeend',\n//       createGalleryMarkup(photosData.hits)\n//     );\n\n//     lightbox.refresh();\n//     page += 1;\n\n//     if (photosData.totalHits === 0) {\n//       iziToast.show({\n//         message: \"We're sorry, but you've reached the end of search results.\",\n//         position: 'topRight',\n//         timeout: 4000,\n//         pauseOnHover: true,\n//         color: 'red',\n//       });\n//       loadMoreBtn.classList.add('is-hidden');\n//       return;\n//     }\n//     loaderEl.classList.add('is-hidden');\n//   } catch (error) {\n//     console.log(error);\n//   }\n// };","export const createGalleryMarkup = photos => {\n    return photos\n      .map(\n        photo => `<li class=\"gallery-card\">\n    <a class=\"gallery-link\" href=\"${photo.largeImageURL}\">\n      <img\n        class=\"gallery-photo\"\n        src=\"${photo.webformatURL}\"\n        data-source=\"${photo.largeImageURL}\"\n        alt=\"${photo.tags}\"\n      />\n    </a>\n    <div class=\"under-img-info\">\n      <ul class=\"list-info\">\n        <li class=\"item-info\">\n          <h3 class=\"title-info\">Likes</h3>\n          <p class=\"text-info\">${photo.likes}</p>\n        </li>\n        <li class=\"item-info\">\n          <h3 class=\"title-info\">Views</h3>\n          <p class=\"text-info\">${photo.views}</p>\n        </li>\n        <li class=\"item-info\">\n          <h3 class=\"title-info\">Comments</h3>\n          <p class=\"text-info\">${photo.comments}</p>\n        </li>\n        <li class=\"item-info\">\n          <h3 class=\"title-info\">Downloads</h3>\n          <p class=\"text-info\">${photo.downloads}</p>\n        </li>\n      </ul>\n    </div>\n  </li>`\n      )\n      .join('');\n  };","import { fetchFotosByQuery, perPage } from './js/pixabay-api.js';\nimport { createGalleryMarkup } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.querySelector('.gallery-list');\nconst searchFormEl = document.querySelector('.form');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nlet page = 1;\nlet searchQuery = '';\nlet totalPages = 0;\nlet lightbox = new SimpleLightbox('.gallery-list a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n\n  page = 1;\n\n  searchQuery = event.target.elements.query.value.trim();\n\n  if (searchQuery === '') {\n    galleryEl.innerHTML = '';\n    event.target.reset();\n    return;\n  }\n\n  galleryEl.innerHTML = '';\n  loaderEl.classList.remove('is-hidden');\n\n  try {\n    const photosData = await fetchFotosByQuery(searchQuery);\n    // console.log('ðŸš€ ~ onSearchFormSubmit ~ photosData:', photosData);\n    // console.log(photosData.totalHits);\n\n    if (photosData.total === 0) {\n      event.target.reset();\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 4000,\n        pauseOnHover: true,\n        color: 'red',\n      });\n      loaderEl.classList.add('is-hidden');\n      loadMoreBtn.classList.add('is-hidden');\n      return;\n    }\n\n    galleryEl.innerHTML = createGalleryMarkup(photosData.hits);\n    lightbox.refresh();\n    totalPages = Math.ceil(photosData.totalHits / perPage);\n    console.log(totalPages);\n    page += 1;\n  } catch (error) {\n    console.log(error);\n  }\n  // console.log(!(galleryEl.innerHTML === ''));\n  // console.log(galleryEl.innerHTML);\n  if (!(galleryEl.innerHTML === '')) {\n    loadMoreBtn.classList.remove('is-hidden');\n  }\n  event.target.reset();\n  loaderEl.classList.add('is-hidden');\n}\n\nconst smoothScrollOnLoadMore = () => {\n  const card = document.querySelector('.gallery-card');\n  const cardHeight = card.getBoundingClientRect().height;\n  const scrollHeight = cardHeight * 2;\n  console.log(scrollHeight);\n\n  window.scrollBy({\n    top: scrollHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\n\nasync function onLoadMoreBtnClick(event) {\n  event.preventDefault();\n  loadMoreBtn.classList.add('is-hidden');\n  loaderEl.classList.remove('is-hidden');\n  try {\n    const photosData = await fetchFotosByQuery(searchQuery, page);\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      createGalleryMarkup(photosData.hits)\n    );\n\n    lightbox.refresh();\n    page += 1;\n    loadMoreBtn.classList.remove('is-hidden');\n\n    loaderEl.classList.add('is-hidden');\n    smoothScrollOnLoadMore();\n\n    if (page > totalPages) {\n      loadMoreBtn.classList.add('is-hidden');\n      loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        timeout: 4000,\n        pauseOnHover: true,\n        color: 'red',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);"],"names":["BASE_URL","perPage","fetchFotosByQuery","searchQuery","page","axios","createGalleryMarkup","photos","photo","galleryEl","searchFormEl","loaderEl","loadMoreBtn","totalPages","lightbox","SimpleLightbox","onSearchFormSubmit","event","photosData","iziToast","error","smoothScrollOnLoadMore","scrollHeight","onLoadMoreBtnClick"],"mappings":"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"}